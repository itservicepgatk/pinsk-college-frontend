import{DOMElements}from'../dom.js';import*as api from'../api.js';import*as ui from'../ui.js';import{state,updateState}from'../state.js';import{fetchLearners,populateGroupFilter}from'./learners.js';import{initializeDashboard}from'./dashboard.js';async function deleteGroup(groupName,learnerCount){const{value:confirmedGroupName}=await Swal.fire({title:`Удаление группы ${groupName}`,html:`Это действие<b>безвозвратно удалит ВСЕХ учащихся(${learnerCount}чел.)</b>из этой группы,а также<b>ВСЕ учебные материалы</b>.<br><br>Для подтверждения введите номер группы:<b>${groupName}</b>`,input:'text',inputPlaceholder:`Введите ${groupName}для подтверждения`,icon:'warning',showCancelButton:true,confirmButtonText:'Я понимаю, удалить',cancelButtonText:'Отмена',inputValidator:(value)=>(value!==groupName)?'Введенный номер группы не совпадает!':null,});if(confirmedGroupName){try{const resData=await api.deleteGroup(groupName);ui.showAlert('success','Удалено!',resData.message);initializeDashboard();fetchAndRenderGroups();}catch(error){ui.showAlert('error','Ошибка!',error.message);}}}
async function fetchAndRenderGroups(){try{const groupsData=await api.getGroups();DOMElements.groupsContainer.innerHTML='';groupsData.forEach(group=>{const folder=document.createElement('div');folder.className='folder';folder.innerHTML=`<button class="delete-group-btn"title="Удалить группу ${group.group_name}">&times;</button><div class="folder-icon"><svg viewBox="0 0 24 24"fill="none"xmlns="http:
                </div>
                <div class="folder-name">Группа ${group.group_name}</div>
                <div class="folder-count"